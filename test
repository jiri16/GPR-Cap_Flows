foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_em  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_em  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci  if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_em   l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_em  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc gprc_em   l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if   inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_em   l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear











foreach x in w_n_bond_hol {

reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci  if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc   l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if em==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear





foreach x in w_n_bond_hol {

reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci  if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc   l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if ae==1 &  inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear






foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_iq iq  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear










foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_x_dep_bo dep_bo_gdp  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_x_dep_bo dep_bo_gdp  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_x_dep_bo dep_bo_gdp  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3


}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_x_dep_eq dep_eq_gdp  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_x_dep_eq dep_eq_gdp  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline6
reghdfe `x' gprc gprc_x_dep_eq dep_eq_gdp  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline7


}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear










foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_x_err er_regime  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_a)

estimates clear








foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_x_ka_open ka_open  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_a)

estimates clear








foreach x in w_n_bond_hol {

reghdfe `x' gprc gprc_iq gprc_x_dep_bo gprc_x_err gprc_x_ka_open iq dep_bo_gdp er_regime ka_open l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline1
reghdfe `x' gprc gprc_iq gprc_x_dep_bo gprc_x_err gprc_x_ka_open iq dep_bo_gdp er_regime ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline2
reghdfe `x' gprc gprc_iq gprc_x_dep_bo gprc_x_err gprc_x_ka_open iq dep_bo_gdp er_regime ka_open  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline3

}

foreach x in w_n_stock_hol {

reghdfe `x' gprc gprc_iq gprc_x_dep_eq gprc_x_err gprc_x_ka_open iq dep_eq_gdp er_regime ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline4
reghdfe `x' gprc gprc_iq gprc_x_dep_eq gprc_x_err gprc_x_ka_open iq dep_eq_gdp er_regime ka_open  l1.`x' l2.`x' l3.`x' tr_yield_1y vix gprc_us gr_us_indprod gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs) vce(cluster ifs)
est store baseline5
reghdfe `x' gprc gprc_iq gprc_x_dep_eq gprc_x_err gprc_x_ka_open iq dep_eq_gdp er_regime ka_open  l1.`x' l2.`x' l3.`x' gr_indprod inf st_ir gr_er gr_msci if inrange(ym, ym(1994,4), ym(2024,4)), absorb(ifs ym) vce(cluster ifs)
est store baseline6

}
esttab baseline*, b(%9.3f) se(%9.3f) star(* 0.10 ** 0.05 *** 0.01) stats(N r2_o r2_a)

estimates clear









DO NOT RUN IN MAIN FILE
******************************************************************************************************************************************

* Calculate the average of gprc for em == 1, em == 0, and all observations
bysort ym: egen gprc_avg_all = mean(gprc)
bysort ym: egen gprc_avg_em1 = mean(cond(em == 1, gprc, .))
bysort ym: egen gprc_avg_em0 = mean(cond(em == 0, gprc, .))

* Keep only one observation per time period
bysort ym: keep if _n == 1


* Save the dataset with the averages
keep ym gprc_avg_all gprc_avg_em1 gprc_avg_em0
save averages, replace


* Load the dataset with the averages
use averages, clear

* Generate a variable for the vertical line
gen vline = ym == ym(2022,1)

* Plot the averages
line gprc_avg_all gprc_avg_em1 gprc_avg_em0 ym, xline(`ym_2022_1', lcolor(black) lpattern(solid) lwidth(medium)) xlabel(, format(%tm)) title("Average gprc Over Time") legend(order(1 "All" 2 "em==1" 3 "em==0"))

